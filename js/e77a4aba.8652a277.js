(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e77a4aba"],{"30f8":function(e,t,n){},3500:function(e,t,n){"use strict";var r=n("616f"),i=n.n(r);i.a},"616f":function(e,t,n){},7963:function(e,t,n){"use strict";var r={parents:function(e){return i(e)},arbre:function(e){return s(e,0)}};function i(e){for(var t=e,n=0;n<t.length;n++)if(t[n].id=n+1,0===t[n].parametres.indentation)t[n].parent=0;else if(t[n].parametres.indentation===t[n-1].parametres.indentation+1)t[n].parent=n;else{var r=1;while(t[n-r].parametres.indentation!==t[n].parametres.indentation)r++;t[n].parent=t[n-r].parent,r=1}return t}function s(e,t){var n=[];for(var r in e)if(e[r].parent===t){var i=s(e,e[r].id);i.length&&(e[r].enfants=i),n.push(e[r])}return n}t["a"]=r},8582:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:"","data-test":"bibliotheque"}},[n("bibliotheque-visionneuse",{attrs:{"data-test":"bibliotheque-visionneuse",ressource:e.ressourceAvisionner,ouvert:e.visionneuseOuverte},on:{"fermer-visionneuse":function(t){e.visionneuseOuverte=!1}}}),n("bibliotheque-description",{attrs:{"data-test":"bibliotheque-description",filArianne:e.filArianne}}),n("bibliotheque-classeur",{attrs:{"data-test":"bibliotheque-classeur",filArianne:e.filArianne},on:{developper:e.allongerFilArianne,consulter:function(t){return e.consulterRessource(t)}}}),n("q-page-sticky",{staticClass:"bg-white",attrs:{position:"top-left"}},[e.filArianne.length>0?n("bibliotheque-navigateur",{staticClass:"pleine-largeur",attrs:{"data-test":"bibliotheque-navigateur",filArianne:e.filArianne},on:{reduire:e.reduireFilArianne}}):e._e()],1)],1)},i=[],s=n("02fa"),a=n.n(s),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"description"},[e.filArianne.length<2&&"Contenus récents"!==e.filArianne[0]?n("div",{staticClass:"titre text-primary"},[e._v("\n    "+e._s(e.titre)+"\n  ")]):e._e(),""!==e.image?n("div",[n("img",{attrs:{src:"../assets/images/"+e.image,width:"50%"}})]):e._e()])},u=[],c={name:"BibliothequeDescription",props:{filArianne:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{titre:function(){var e="Explorez vos catalogues de ressources";return this.filArianne.length>0&&(e="Contenus récents"===this.filArianne[0]?"":this.filArianne[0]),e},image:function(){var e="livres.svg";return 0!==this.filArianne.length&&(e=""),e}}},l=c,f=(n("cd23"),n("2877")),d=Object(f["a"])(l,o,u,!1,null,"a5bc3c28",null),p=d.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["menu"===e.catalogue.type?n("q-list",{attrs:{separator:""}},e._l(e.catalogue.liste,function(t,r){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:r,staticClass:"text-primary",staticStyle:{"font-size":"1rem","font-weight":"300"},attrs:{"data-test":"classeur-menu"},nativeOn:{click:function(t){return e.voir(r)}}},[n("q-item-section",[e._v(e._s(r))]),n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{name:"chevron_right",color:"primary"}})],1)],1)}),1):e._e(),"contenu"===e.catalogue.type?n("q-list",{attrs:{separator:""}},e._l(e.catalogue.liste,function(t,r){return n("q-item",{key:r,attrs:{"data-test":"classeur-contenu"},nativeOn:{click:function(n){return e.consulter(t)}}},[n("q-item-section",["Contenus récents"===e.filArianne[0]?n("q-item-label",{attrs:{lines:2}},[n("b",[e._v(e._s(t.type))]),e._v("  \n          "),e._l(t.classe,function(t){return n("span",{key:t,staticClass:"text-secondary",staticStyle:{"font-size":"smaller"}},[e._v("\n            | "+e._s(t))])})],2):e._e(),n("q-item-label",e._l(t.notions,function(t){return n("q-badge",{key:t,staticClass:"q-mr-xs",attrs:{color:"secondary"}},[e._v(e._s(t))])}),1),n("q-item-label",{attrs:{lines:2,caption:""}},[n("i",[e._v(e._s(t.description))])])],1)],1)}),1):e._e()],1)},h=[],v=(n("6762"),n("2fdb"),n("2f62")),b={name:"BibliothequeClasseur",props:{filArianne:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:a()({},Object(v["b"])({classeur:function(e){return e.ressources.classeurBibliotheque}}),{catalogue:function(){var e;if(this.filArianne===[])return e=this.classeur,{type:"menu",liste:e};if("Contenus récents"===this.filArianne[0])return e=this.classeur["Contenus récents"],{type:"contenu",liste:e};e=this.classeur;for(var t=0;t<this.filArianne.length;t++){var n=this.filArianne[t];e=e[n]}var r="";if(Array.isArray(e)){r="contenu";var i=this.classeur["Contenus récents"];e=i.filter(function(t){return e.includes(t.uid)})}else r="menu";return{type:r,liste:e}}}),methods:{voir:function(e){this.$emit("developper",e)},consulter:function(e){this.$emit("consulter",e)}}},g=b,_=Object(f["a"])(g,m,h,!1,null,null,null),q=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-breadcrumbs",{attrs:{"data-test":"navigateur",color:"primary",separator:"|"}},[n("q-btn",{staticStyle:{width:"2rem","min-width":"1rem",height:"3rem","min-height":"1rem"},attrs:{flat:"",size:"lg",color:"negative",icon:"arrow_left"},on:{click:e.retour}}),e._l(e.navigateur,function(e,t){return n("q-breadcrumbs-el",{key:t,attrs:{label:e}})})],2)},A=[],w={name:"BibliothequeNavigateur",props:{filArianne:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:a()({},Object(v["b"])({}),{navigateur:function(){return"Contenus récents"===this.filArianne[0]?this.filArianne:(e=1===this.filArianne.length?["retour au catalogue principal"]:this.filArianne.slice(1),e);var e}}),methods:{retour:function(){this.$emit("reduire")}}},O=w,k=Object(f["a"])(O,y,A,!1,null,null,null),C=k.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{"data-test":"visionneuse-ressource",maximized:"","transition-show":"scale","transition-hide":"slide-left"},model:{value:e.ouvert,callback:function(t){e.ouvert=t},expression:"ouvert"}},[n("div",{staticClass:"bg-white",attrs:{"data-test":"recherche-fenetre-modale"}},[n("div",{staticClass:"bg-primary text-white"},[n("q-toolbar",{attrs:{"data-test":"visionneuse-titre"}},[n("q-btn",{attrs:{"data-test":"bouton-fermer-ressource",flat:"",round:"",dense:"",icon:"chevron_left"},on:{click:function(t){return e.$emit("fermer-visionneuse")}}}),n("q-toolbar-title",[e._v("\n          "+e._s(e.ressource.type)+"\n        ")]),n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"edit"},on:{click:e.modifier}}),n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"delete"},on:{click:e.supprimer}})],1),n("q-toolbar",{staticStyle:{"min-height":"0"},attrs:{inset:""}},[n("q-breadcrumbs",{attrs:{"active-color":"white",separator:"|"}},e._l(e.ressource.classe,function(t){return n("q-breadcrumbs-el",{key:t,staticStyle:{"margin-right":"5px","font-size":"12px"}},[e._v(e._s(t))])}),1)],1)],1),n("div",{staticClass:"q-pa-sm"},[n("i",[e._v(e._s(e.ressource.description))]),n("br"),e._l(e.ressource.notions,function(t){return n("q-badge",{key:t,staticClass:"q-mr-xs",attrs:{color:"secondary"}},[e._v(e._s(t))])}),n("br"),e.ressource.contenus?[n("widgets-imbriques",{style:{paddingLeft:e.ressource.contenus.widgets[0].parametres.numerotation?"1rem":"0rem"},attrs:{widgets:e.widgetsVisuel(e.ressource.contenus.widgets),parametres:e.ressource.parametres}})]:e._e(),e.ressource.composants?e._l(e.ressource.composants,function(t,r){return n("div",{key:r},[t.contenus?n("div",[n("widgets-imbriques",{style:{paddingLeft:t.contenus.widgets[0].parametres.numerotation?"1rem":"0rem"},attrs:{widgets:e.widgetsVisuel(t.contenus.widgets),parametres:t.parametres}})],1):e._e()])}):e._e()],2)])])},$=[],S=n("e0fc"),E=n("7963"),J={name:"BibliothequeVisionneuse",components:{WidgetsImbriques:S["a"]},props:{ressource:{type:Object},ouvert:{type:Boolean}},data:function(){return{}},methods:{modifier:function(){this.$store.commit("ressources/MAJ_RESSOURCE_A_MODIFIER",this.ressource),this.$emit("fermer-visionneuse"),this.$router.push("/edition")},supprimer:function(){var e=this;this.$q.dialog({title:"Suppression...",message:"Voulez-vous vraiment supprimer cette ressource?",ok:{push:!0},cancel:{color:"negative",label:"annuler"},persistent:!0}).onOk(function(){e.$store.dispatch("ressources/supprimerRessource",e.ressource),e.$emit("fermer-visionneuse")})},widgetsVisuel:function(e){var t=[],n=JSON.parse(JSON.stringify(e)),r=E["a"].parents(n),i=JSON.parse(JSON.stringify(r));return t=E["a"].arbre(i),t}}},M=J,B=Object(f["a"])(M,x,$,!1,null,null,null),j=B.exports,N={name:"PageBibliotheque",components:{BibliothequeDescription:p,BibliothequeClasseur:q,BibliothequeNavigateur:C,BibliothequeVisionneuse:j},data:function(){return{ressourceAvisionner:{},visionneuseOuverte:!1,filArianne:[]}},computed:a()({ress:function(){return this.$store.state.ressources.composants}},Object(v["b"])({classeur:function(e){return e.ressources.classeurBibliotheque}})),methods:{allongerFilArianne:function(e){this.filArianne.push(e)},reduireFilArianne:function(){this.filArianne.pop()},reinitialiserFilArianne:function(){this.filArianne=[]},consulterRessource:function(e){this.ressourceAvisionner=e,this.visionneuseOuverte=!0},MAJMath:function(){this.$nextTick(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])})}},mounted:function(){this.$store.commit("ressources/METTRE_A_JOUR_CLASSEUR"),this.MAJMath()},updated:function(){this.MAJMath()}},R=N,z=(n("3500"),Object(f["a"])(R,r,i,!1,null,"14358ea2",null));t["default"]=z.exports},b24d:function(e,t,n){},cd23:function(e,t,n){"use strict";var r=n("30f8"),i=n.n(r);i.a},e0fc:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ol",{staticClass:"indentation",style:e.styleNumerotation},[e._l(e.widgets,function(t,r){return[t.parametres.numerotation?n("li",{key:r},[n("span",{domProps:{innerHTML:e._s(t.valeur)}}),t.enfants?n("widgets-imbriques",{attrs:{widgets:t.enfants,parametres:e.parametres}}):e._e()],1):e._e(),t.parametres.numerotation?e._e():n("div",{key:r},[n("span",{domProps:{innerHTML:e._s(t.valeur)}}),t.enfants?n("widgets-imbriques",{attrs:{widgets:t.enfants,parametres:e.parametres}}):e._e()],1)]})],2)},i=[],s={name:"WidgetsImbriques",props:{widgets:{type:Array},parametres:{type:Object}},data:function(){return{}},computed:{styleNumerotation:function(){var e;if(this.widgets[0]){var t=this.widgets[0].parametres.indentation+1;e={listStyleType:this.parametres.widget["niveau"+t]}}return e}}},a=s,o=(n("e900"),n("2877")),u=Object(o["a"])(a,r,i,!1,null,"7f1f0d66",null);t["a"]=u.exports},e900:function(e,t,n){"use strict";var r=n("b24d"),i=n.n(r);i.a}}]);