(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["33c8a6b4"],{"01b2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",[n("q-banner",{staticClass:"text-white bg-red",attrs:{dense:"","inline-actions":""}},[t._v("\n    Cette plateforme est encore en cours de developpement...\n  ")]),n("q-page-container",[n("div",{staticClass:"lancement",attrs:{"data-test":"connexion"}},["initialisation"===t.statutConnexion?n("div",{staticClass:"logo"}):t._e(),"initialisation"===t.statutConnexion?n("div",{staticClass:"chargement"},[n("div",{staticClass:"text-white"},[t._v(t._s(t.chargement.message))]),n("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"1rem"},attrs:{stripe:"",rounded:"",value:t.pourcentageActuel,color:"accent",id:"chargement"}}),n("div",{staticClass:"text-white"},[t._v(t._s(t.chargement.pourcentage+"%"))])],1):t._e(),100===t.chargement.pourcentage&&"connexion"===t.statutConnexion?n("formulaire-connexion",{attrs:{"data-test":"formulaire-connexion"},on:{afficherFormulaire:t.afficherFormulaire}}):t._e(),100===t.chargement.pourcentage&&"inscription"===t.statutConnexion?n("formulaire-inscription",{attrs:{"data-test":"formulaire-inscription"},on:{afficherFormulaire:t.afficherFormulaire}}):t._e()],1)])],1)},s=[],a=n("02fa"),o=n.n(a),r=n("5df0"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticStyle:{"align-self":"center"},attrs:{"data-test":"formulaire-connexion"}},[i("q-card-section",{staticClass:"text-center"},[i("div",{staticClass:"text-h6 text-weight-light"},[t._v("Bienvenue")]),i("q-avatar",{attrs:{square:"",size:"5rem"}},[i("img",{attrs:{src:n("be35")}})])],1),i("q-card-section",[i("q-input",{attrs:{"bottom-slots":"",label:"Nom d'utilisateur",outlined:"",dense:"",type:"text","data-test":"formulaire-connexion-username"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.identifiants.username,callback:function(e){t.$set(t.identifiants,"username",e)},expression:"identifiants.username"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-connexion-mdp"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"hint",fn:function(){return[i("span",{staticClass:"text-accent pointeur"},[t._v("Mot de passe oublié?")])]},proxy:!0}]),model:{value:t.identifiants.mdp,callback:function(e){t.$set(t.identifiants,"mdp",e)},expression:"identifiants.mdp"}})],1),i("q-card-actions",{staticClass:"text-center"},[i("q-btn",{staticClass:"full-width",attrs:{"data-test":"formulaire-connexion-soumettre",color:"primary",label:"Connexion",loading:t.connexion,disable:!t.formulaireValide},on:{click:t.connecter},scopedSlots:t._u([{key:"loading",fn:function(){return[t._v("\n        Connexion en cours\n        "),i("q-spinner-dots",{staticClass:"on-right"})]},proxy:!0}])}),i("div",{staticClass:"q-mx-auto q-my-md"},[i("span",{staticClass:"text-weight-light text-grey-7 q-pr-xs"},[t._v("Pas encore incrit?\n      ")]),i("br"),i("span",{staticClass:"text-accent pointeur",attrs:{"data-test":"bouton-inscription"},on:{click:t.afficherFormulaireInscription}},[t._v("Créez un compte gratuitement")])])],1)],1)},l=[],u={name:"FormulaireConnexion",data:function(){return{identifiants:{username:"",mdp:""}}},computed:{formulaireValide:function(){var t,e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;return t=!!(this.identifiants.username.length>=4&&e.test(this.identifiants.mdp)),t},connected:function(){var t=this.$store.state.authentification.connected;return t},connexion:function(){var t=this.$store.state.authentification.connexion;return t}},methods:{afficherFormulaireInscription:function(){this.$emit("afficherFormulaire","inscription")},connecter:function(){this.$store.dispatch("authentification/connecter",this.identifiants)}},watch:{connected:function(t,e){this.$router.push("/dashboard")}}},d=u,m=(n("d988"),n("2877")),f=Object(m["a"])(d,c,l,!1,null,"676ba34d",null),p=f.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticStyle:{"align-self":"center"},attrs:{"data-test":"formulaire-inscription"}},[i("q-card-section",{staticClass:"text-center"},[i("div",{staticClass:"text-h6 text-weight-light"},[t._v("\n      Créez gratuitement votre compte\n    ")]),i("q-avatar",{attrs:{square:"",size:"5rem"}},[i("img",{attrs:{src:n("be35")}})])],1),i("q-card-section",[i("q-form",[i("q-input",{attrs:{"bottom-slots":"",label:"Nom d'utilisateur",outlined:"",dense:"",type:"text","data-test":"formulaire-inscription-username",rules:[function(t){return t.length>=4||"SVP! Utilisez au moins 4 caractères"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[i("span",[t._v("Quel sera votre nom d'utilisateur")])]},proxy:!0}]),model:{value:t.identifiants.username,callback:function(e){t.$set(t.identifiants,"username",e)},expression:"identifiants.username"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-inscription-mdp",rules:[function(t){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/.test(t)||"SVP! Utilisez au moins 8 caractères, une minuscule, une majuscule et un chiffre"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[i("span",[t._v("Saisissez un mot de passe")])]},proxy:!0}]),model:{value:t.identifiants.mdp1,callback:function(e){t.$set(t.identifiants,"mdp1",e)},expression:"identifiants.mdp1"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-inscription-mdp-confirmation",rules:[function(e){return e===t.identifiants.mdp1||"SVP! Ce mot de passe ne correspond pas à celui que vous avez saisi"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[i("span",[t._v("Saisissez à nouveau votre mot de passe")])]},proxy:!0}]),model:{value:t.identifiants.mdp2,callback:function(e){t.$set(t.identifiants,"mdp2",e)},expression:"identifiants.mdp2"}})],1)],1),i("q-card-actions",{staticClass:"text-center"},[i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Inscription",disable:!t.formulaireValide,"data-test":"formulaire-inscription-soumettre"},on:{click:t.inscrire}}),i("div",{staticClass:"q-mx-auto q-my-md"},[i("span",{staticClass:"text-weight-light text-grey-7 q-pr-xs"},[t._v("Vous avez déjà un compte?\n      ")]),i("br"),i("span",{staticClass:"text-accent pointeur",attrs:{"data-test":"bouton-connexion"},on:{click:t.afficherFormulaireConnexion}},[t._v("Connectez vous")])])],1),i("q-dialog",{attrs:{"data-test":"confirmation-inscription",maximized:""},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}},[i("div",{staticClass:"bg-white items-center q-pa-lg",attrs:{"data-test":"confirmation-inscription"}},[i("div",{staticClass:"text-center"},[i("span",{staticClass:"text-h5"},[t._v("Bravo! 👏🏽🎉")]),i("br"),i("span",{staticClass:"text-subtitle2"},[t._v("✨✨Inscription effectuée avec succès.✨✨")]),i("br"),i("br"),i("span",{staticClass:"text-weight-light"},[t._v("Veuillez compléter votre profil pour profiter pleinement de cette\n          application.")])]),i("div",{staticClass:"absolute-center q-mx-md"},[i("q-input",{attrs:{"bottom-slots":"",label:"Votre nom",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-nom"},model:{value:t.identifiants.nom,callback:function(e){t.$set(t.identifiants,"nom",e)},expression:"identifiants.nom"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Votre prénom",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-prenom"},model:{value:t.identifiants.prenom,callback:function(e){t.$set(t.identifiants,"prenom",e)},expression:"identifiants.prenom"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Décrivez-vous brièvement",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-description"},model:{value:t.identifiants.description,callback:function(e){t.$set(t.identifiants,"description",e)},expression:"identifiants.description"}}),i("q-select",{attrs:{"bottom-slots":"",outlined:"",options:t.roles,dense:"",label:"Votre role","data-test":"formulaire-profil-role"},model:{value:t.identifiants.role,callback:function(e){t.$set(t.identifiants,"role",e)},expression:"identifiants.role"}}),i("q-select",{attrs:{"bottom-slots":"",outlined:"",options:t.etablissements,dense:"",label:"Votre établissement","data-test":"formulaire-profil-etablissement-nom"},model:{value:t.identifiants.etablissement.nom,callback:function(e){t.$set(t.identifiants.etablissement,"nom",e)},expression:"identifiants.etablissement.nom"}}),i("q-input",{attrs:{"bottom-slots":"",label:"Votre matière",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-matiere"},model:{value:t.identifiants.matiere,callback:function(e){t.$set(t.identifiants,"matiere",e)},expression:"identifiants.matiere"}}),i("q-btn",{attrs:{"data-test":"bouton-validation-profil",color:"primary",label:"Créer votre profil"},on:{click:t.majProfil}}),i("q-btn",{attrs:{"data-test":"bouton-ignorer-profil",color:"primary",flat:"",label:"Ignorer"},on:{click:t.continuer}})],1)])])],1)},b=[],v={name:"FormulaireInscription",data:function(){return{identifiants:{username:"",mdp1:"",mdp2:"",nom:"",prenom:"",description:"",role:"",etablissement:{nom:""}},confirmation:!1,roles:["Enseignant","Elève","Autre"],etablissements:r}},computed:{inscrit:function(){return this.$store.state.authentification.inscrit},formulaireValide:function(){var t=this.identifiants.mdp1===this.identifiants.mdp2&&this.identifiants.username.length>3;return t}},methods:{inscrire:function(){this.formulaireValide&&(this.$store.dispatch("authentification/inscrire",this.identifiants),this.inscrit&&(this.confirmation=!0))},continuer:function(){this.$store.commit("authentification/ACTIVER_CONNEXION",this.identifiants),this.$router.push("/dashboard")},majProfil:function(){this.$store.commit("authentification/MAJ_PROFIL",this.identifiants),this.$store.commit("authentification/ACTIVER_CONNEXION",this.identifiants),this.$router.push("/dashboard")},afficherFormulaireConnexion:function(){this.$emit("afficherFormulaire","connexion")}}},x=v,g=(n("9736"),Object(m["a"])(x,h,b,!1,null,"52a4c98a",null)),C=g.exports,q=n("2f62"),y={name:"LayoutConnexion",components:{FormulaireConnexion:p,FormulaireInscription:C},data:function(){return{message:"Bienvenu sur e-SchoolBag",pourcentage:.05,pourcentageActuel:0,identifiantsInscription:{username:"",mdp1:"",mdp2:"",nom:"",prenom:"",description:"",role:"",etablissement:{nom:""}},confirmation:!1,roles:["Enseignant","Elève","Autre"],etablissements:r,statutConnexion:"initialisation"}},computed:o()({chargement:function(){var t=this.message,e=Math.floor(100*this.pourcentageActuel);return e>=70&&(t="Lancement..."),{message:t,pourcentage:e}}},Object(q["b"])({inscrit:function(t){return t.authentification.inscrit},connected:function(t){return t.authentification.connected},connexion:function(t){return t.authentification.connexion},formulaireIdentification:function(t){return t.affichage.formulaireIdentification}}),{formulaireInscriptionValide:function(){var t=this.identifiantsInscription.mdp1===this.identifiantsInscription.mdp2&&this.identifiantsInscription.username.length>3;return t}}),methods:{MAJPourcentageActuel:function(t){var e=this;this.pourcentageActuel=this.pourcentage,this.pourcentage+=t;var n=function t(){e.pourcentageActuel<e.pourcentage&&(e.pourcentageActuel+=.01,requestAnimationFrame(t))};requestAnimationFrame(n)},aller:function(t){var e=this;setTimeout(function(){e.$router.push(t)},500)},afficherFormulaire:function(t){this.statutConnexion=t},reinitialiser:function(){this.$store.commit("authentification/MODIFIER_CONNEXION",!1)}},beforeMount:function(){var t=this;this.reinitialiser(),setTimeout(function(){t.MAJPourcentageActuel(.1)},1e3)},mounted:function(){var t=this;setTimeout(function(){t.message="Patientez svp...",t.MAJPourcentageActuel(.85)},2e3),window.Cypress&&(console.log("Test Cypress"),window.$store=this.$store)},watch:{"chargement.pourcentage":function(t,e){var n=this;100===t&&setTimeout(function(){n.inscrit?n.connected?n.aller("/dashboard"):n.afficherFormulaire("connexion"):n.afficherFormulaire("inscription")},1e3)}}},_=y,$=(n("4bc5"),Object(m["a"])(_,i,s,!1,null,null,null));e["default"]=$.exports},"4bc5":function(t,e,n){"use strict";var i=n("6d6c"),s=n.n(i);s.a},"5df0":function(t){t.exports=["Lycée Leclerc","Lycée Joss","Collège Terenstra"]},"6d6c":function(t,e,n){},9736:function(t,e,n){"use strict";var i=n("c2b1"),s=n.n(i);s.a},b128:function(t,e,n){},be35:function(t,e,n){t.exports=n.p+"img/sac.e0435671.svg"},c2b1:function(t,e,n){},d988:function(t,e,n){"use strict";var i=n("b128"),s=n.n(i);s.a}}]);