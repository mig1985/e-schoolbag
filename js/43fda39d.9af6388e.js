(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["43fda39d"],{"01b2":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-layout",[i("q-banner",{staticClass:"text-white bg-red",attrs:{dense:"","inline-actions":""}},[t._v("\n    Cette plateforme est encore en cours de developpement...\n  ")]),i("q-page-container",[i("div",{staticClass:"lancement",attrs:{"data-test":"connexion"}},["initialisation"===t.statutConnexion?i("div",{staticClass:"logo"}):t._e(),"initialisation"===t.statutConnexion?i("div",{staticClass:"chargement"},[i("div",{staticClass:"text-white"},[t._v(t._s(t.chargement.message))]),i("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"1rem"},attrs:{stripe:"",rounded:"",value:t.pourcentageActuel,color:"accent",id:"chargement"}}),i("div",{staticClass:"text-white"},[t._v(t._s(t.chargement.pourcentage+"%"))])],1):t._e(),100===t.chargement.pourcentage&&"connexion"===t.statutConnexion?i("formulaire-connexion",{attrs:{"data-test":"formulaire-connexion"},on:{afficherFormulaire:t.afficherFormulaire}}):t._e(),100===t.chargement.pourcentage&&"inscription"===t.statutConnexion?i("formulaire-inscription",{attrs:{"data-test":"formulaire-inscription"},on:{afficherFormulaire:t.afficherFormulaire}}):t._e()],1)])],1)},s=[],a=i("02fa"),o=i.n(a),r=i("5df0"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticStyle:{"align-self":"center",width:"80%"},attrs:{"data-test":"formulaire-connexion"}},[n("q-card-section",{staticClass:"text-center"},[n("div",{staticClass:"text-h6 text-weight-light"},[t._v("Bienvenue")]),n("q-avatar",{attrs:{square:"",size:"5rem"}},[n("img",{attrs:{src:i("be35")}})])],1),n("q-card-section",[n("q-input",{attrs:{"bottom-slots":"",label:"Nom d'utilisateur",outlined:"",dense:"",type:"text","data-test":"formulaire-connexion-username"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.identifiants.username,callback:function(e){t.$set(t.identifiants,"username",e)},expression:"identifiants.username"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-connexion-mdp"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"hint",fn:function(){return[n("span",{staticClass:"text-accent"},[t._v("Mot de passe oublié?")])]},proxy:!0}]),model:{value:t.identifiants.mdp,callback:function(e){t.$set(t.identifiants,"mdp",e)},expression:"identifiants.mdp"}})],1),n("q-card-actions",{staticClass:"text-center"},[n("q-btn",{staticClass:"full-width",attrs:{"data-test":"formulaire-connexion-soumettre",color:"primary",label:"Connexion",loading:t.connexion,disable:!t.formulaireValide},on:{click:t.connecter},scopedSlots:t._u([{key:"loading",fn:function(){return[t._v("\n        Connexion en cours\n        "),n("q-spinner-dots",{staticClass:"on-right"})]},proxy:!0}])}),n("div",{staticClass:"q-mx-auto q-my-md"},[n("span",{staticClass:"text-weight-light text-grey-7 q-pr-xs"},[t._v("Pas encore incrit?\n      ")]),n("br"),n("span",{staticClass:"text-accent",attrs:{"data-test":"bouton-inscription"},on:{click:t.afficherFormulaireInscription}},[t._v("Créez un compte gratuitement")])])],1)],1)},l=[],u={name:"FormulaireConnexion",data:function(){return{identifiants:{username:"",mdp:""}}},computed:{formulaireValide:function(){var t,e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;return t=!!(this.identifiants.username.length>=4&&e.test(this.identifiants.mdp)),t},connected:function(){var t=this.$store.state.authentification.connected;return t},connexion:function(){var t=this.$store.state.authentification.connexion;return t}},methods:{afficherFormulaireInscription:function(){this.$emit("afficherFormulaire","inscription")},connecter:function(){this.$store.dispatch("authentification/connecter",this.identifiants)}},watch:{connected:function(t,e){this.$router.push("/bibliotheque")}}},m=u,d=i("2877"),f=Object(d["a"])(m,c,l,!1,null,null,null),p=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticStyle:{"align-self":"center",width:"80%"},attrs:{"data-test":"formulaire-inscription"}},[n("q-card-section",{staticClass:"text-center"},[n("div",{staticClass:"text-h6 text-weight-light"},[t._v("\n      Créez gratuitement votre compte\n    ")]),n("q-avatar",{attrs:{square:"",size:"5rem"}},[n("img",{attrs:{src:i("be35")}})])],1),n("q-card-section",[n("q-form",[n("q-input",{attrs:{"bottom-slots":"",label:"Nom d'utilisateur",outlined:"",dense:"",type:"text","data-test":"formulaire-inscription-username",rules:[function(t){return t.length>=4||"SVP! Utilisez au moins 4 caractères"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[n("span",[t._v("Quel sera votre nom d'utilisateur")])]},proxy:!0}]),model:{value:t.identifiants.username,callback:function(e){t.$set(t.identifiants,"username",e)},expression:"identifiants.username"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-inscription-mdp",rules:[function(t){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/.test(t)||"SVP! Utilisez au moins 8 caractères, une minuscule, une majuscule et un chiffre"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[n("span",[t._v("Saisissez un mot de passe")])]},proxy:!0}]),model:{value:t.identifiants.mdp1,callback:function(e){t.$set(t.identifiants,"mdp1",e)},expression:"identifiants.mdp1"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Mot de passe",outlined:"",dense:"",type:"password","data-test":"formulaire-inscription-mdp-confirmation",rules:[function(e){return e===t.identifiants.mdp1||"SVP! Ce mot de passe ne correspond pas à celui que vous avez saisi"}]},scopedSlots:t._u([{key:"hint",fn:function(){return[n("span",[t._v("Saisissez à nouveau votre mot de passe")])]},proxy:!0}]),model:{value:t.identifiants.mdp2,callback:function(e){t.$set(t.identifiants,"mdp2",e)},expression:"identifiants.mdp2"}})],1)],1),n("q-card-actions",{staticClass:"text-center"},[n("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Inscription",disable:!t.formulaireValide,"data-test":"formulaire-inscription-soumettre"},on:{click:t.inscrire}}),n("div",{staticClass:"q-mx-auto q-my-md"},[n("span",{staticClass:"text-weight-light text-grey-7 q-pr-xs"},[t._v("Vous avez déjà un compte?\n      ")]),n("br"),n("span",{staticClass:"text-accent",attrs:{"data-test":"bouton-connexion"},on:{click:t.afficherFormulaireConnexion}},[t._v("Connectez vous")])])],1),n("q-dialog",{attrs:{"data-test":"confirmation-inscription",maximized:""},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}},[n("div",{staticClass:"bg-white items-center q-pa-lg",attrs:{"data-test":"confirmation-inscription"}},[n("div",{staticClass:"text-center"},[n("span",{staticClass:"text-h5"},[t._v("Bravo! 👏🏽🎉")]),n("br"),n("span",{staticClass:"text-subtitle2"},[t._v("✨✨Inscription effectuée avec succès.✨✨")]),n("br"),n("br"),n("span",{staticClass:"text-weight-light"},[t._v("Veuillez compléter votre profil pour profiter pleinement de cette\n          application.")])]),n("div",{staticClass:"q-mx-md"},[n("q-input",{attrs:{"bottom-slots":"",label:"Votre nom",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-nom"},model:{value:t.identifiants.nom,callback:function(e){t.$set(t.identifiants,"nom",e)},expression:"identifiants.nom"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Votre prénom",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-prenom"},model:{value:t.identifiants.prenom,callback:function(e){t.$set(t.identifiants,"prenom",e)},expression:"identifiants.prenom"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Décrivez-vous brièvement",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-description"},model:{value:t.identifiants.description,callback:function(e){t.$set(t.identifiants,"description",e)},expression:"identifiants.description"}}),n("q-select",{attrs:{"bottom-slots":"",outlined:"",options:t.roles,dense:"",label:"Votre role","data-test":"formulaire-profil-role"},model:{value:t.identifiants.role,callback:function(e){t.$set(t.identifiants,"role",e)},expression:"identifiants.role"}}),n("q-select",{attrs:{"bottom-slots":"",outlined:"",options:t.etablissements,dense:"",label:"Votre établissement","data-test":"formulaire-profil-etablissement-nom"},model:{value:t.identifiants.etablissement.nom,callback:function(e){t.$set(t.identifiants.etablissement,"nom",e)},expression:"identifiants.etablissement.nom"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Votre matière",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-matiere"},model:{value:t.identifiants.matiere,callback:function(e){t.$set(t.identifiants,"matiere",e)},expression:"identifiants.matiere"}}),n("q-input",{attrs:{"bottom-slots":"",label:"Votre matricule (si disponible)",outlined:"",dense:"",type:"text","data-test":"formulaire-profil-matricule"},model:{value:t.identifiants.matricule,callback:function(e){t.$set(t.identifiants,"matricule",e)},expression:"identifiants.matricule"}}),n("q-btn",{attrs:{"data-test":"bouton-validation-profil",color:"primary",label:"Créer votre profil"},on:{click:t.majProfil}}),n("q-btn",{attrs:{"data-test":"bouton-ignorer-profil",color:"primary",flat:"",label:"Ignorer"},on:{click:t.continuer}})],1)])])],1)},b=[],x={name:"FormulaireInscription",data:function(){return{identifiants:{username:"",mdp1:"",mdp2:"",nom:"",prenom:"",description:"",role:"",etablissement:{nom:""}},confirmation:!1,roles:["Enseignant","Elève","Autre"],etablissements:r}},computed:{inscrit:function(){return this.$store.state.authentification.inscrit},formulaireValide:function(){var t=this.identifiants.mdp1===this.identifiants.mdp2&&this.identifiants.username.length>3;return t}},methods:{inscrire:function(){this.formulaireValide&&(this.$store.dispatch("authentification/inscrire",this.identifiants),this.inscrit&&(this.confirmation=!0))},continuer:function(){this.$store.commit("authentification/ACTIVER_CONNEXION",this.identifiants),this.$router.push("/bibliotheque")},majProfil:function(){this.$store.commit("authentification/MAJ_PROFIL",this.identifiants),this.$store.commit("authentification/ACTIVER_CONNEXION",this.identifiants),this.$router.push("/bibliotheque")},afficherFormulaireConnexion:function(){this.$emit("afficherFormulaire","connexion")}}},v=x,g=Object(d["a"])(v,h,b,!1,null,null,null),C=g.exports,q=i("2f62"),y={name:"LayoutConnexion",components:{FormulaireConnexion:p,FormulaireInscription:C},data:function(){return{message:"Bienvenu sur e-SchoolBag",pourcentage:.05,pourcentageActuel:0,identifiantsInscription:{username:"",mdp1:"",mdp2:"",nom:"",prenom:"",description:"",role:"",etablissement:{nom:""}},confirmation:!1,roles:["Enseignant","Elève","Autre"],etablissements:r,statutConnexion:"initialisation"}},computed:o()({chargement:function(){var t=this.message,e=Math.floor(100*this.pourcentageActuel);return e>=70&&(t="Lancement..."),{message:t,pourcentage:e}}},Object(q["b"])({inscrit:function(t){return t.authentification.inscrit},connected:function(t){return t.authentification.connected},connexion:function(t){return t.authentification.connexion},formulaireIdentification:function(t){return t.affichage.formulaireIdentification}}),{formulaireInscriptionValide:function(){var t=this.identifiantsInscription.mdp1===this.identifiantsInscription.mdp2&&this.identifiantsInscription.username.length>3;return t}}),methods:{MAJPourcentageActuel:function(t){var e=this;this.pourcentageActuel=this.pourcentage,this.pourcentage+=t;var i=function t(){e.pourcentageActuel<e.pourcentage&&(e.pourcentageActuel+=.01,requestAnimationFrame(t))};requestAnimationFrame(i)},aller:function(t){var e=this;setTimeout(function(){e.$router.push(t)},500)},afficherFormulaire:function(t){this.statutConnexion=t},reinitialiser:function(){this.$store.commit("authentification/MODIFIER_CONNEXION",!1)}},beforeMount:function(){var t=this;this.reinitialiser(),setTimeout(function(){t.MAJPourcentageActuel(.1)},1e3)},mounted:function(){var t=this;setTimeout(function(){t.message="Patientez svp...",t.MAJPourcentageActuel(.85)},2e3),window.Cypress&&(console.log("Test Cypress"),window.$store=this.$store)},watch:{"chargement.pourcentage":function(t,e){var i=this;100===t&&setTimeout(function(){i.inscrit?i.connected?i.aller("/dashboard"):i.afficherFormulaire("connexion"):i.afficherFormulaire("inscription")},1e3)}}},_=y,$=(i("4bc5"),Object(d["a"])(_,n,s,!1,null,null,null));e["default"]=$.exports},"4bc5":function(t,e,i){"use strict";var n=i("6d6c"),s=i.n(n);s.a},"5df0":function(t){t.exports=["Lycée Leclerc","Lycée Joss","Collège Terenstra"]},"6d6c":function(t,e,i){},be35:function(t,e,i){t.exports=i.p+"img/sac.e0435671.svg"}}]);